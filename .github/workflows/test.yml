on: [push]

name: 测试

jobs:
  test:
    name: 测试
    runs-on: ubuntu-24.04
    strategy:
      matrix:
        include:
          - name: 冰雪四拼
            schema: snow_sipin
          - name: 冰雪三拼
            schema: snow_sanpin
          - name: 冰雪一拼
            schema: snow_yipin
          - name: 冰雪键道
            schema: snow_jiandao
          - name: 冰雪清韵
            schema: snow_qingyun
    steps:
      - name: 获取代码
        uses: actions/checkout@v4
        with:
          submodules: true
      - name: 复制笔画输入方案
        run: |
          cp rime-stroke/stroke* .
      - name: 安装 Mira
        run: |
          wget https://github.com/rimeinn/mira/releases/download/latest/mira
          chmod +x mira
      - name: ${{ matrix.name }}
        run: ./mira -C cache spec/${{ matrix.schema }}.test.yaml
